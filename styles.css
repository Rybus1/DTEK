:root {
  --bg: #0b0f14;
  --card: #0f1722;
  --text: #e6edf3;
  --muted: #94a3b8;
  --border: #243248;
  --accent: #ebe555;
  --off: #64748b;
  --unknown: #374151;
  --pill-text-dark: #0b0f14;
  --danger: #fbbf24;
  --now: #38f8ff;
}

[data-theme="light"] {
  --bg: #fbf5e6;
  --card: #fffcf7;
  --text: #2b2b23;
  --muted: #6b6a5f;
  --border: #efe6d6;
  --accent: #ebe555;
  --off: #b4bbc4;
  --unknown: #c0c5c9;
  --pill-text-dark: #1f1b16;
  --danger: #b45309;
  --now: #38f8ff;
}

* { box-sizing: border-box }

html, body { height: 100% }

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica;
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background .18s ease, color .18s ease;
}

.wrap {
  max-width: 1100px;
  margin: 0 auto;
  padding: 18px;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
}

.row {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.row--tight { gap: 8px }
.row--between { justify-content: space-between }
.row--center { align-items: center }

.field { min-width: 160px }
.field--grow { flex: 1; min-width: 240px }

label {
  font-size: 12px;
  opacity: .85;
  display: block;
  margin-bottom: 6px;
}

select,
button {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 10px;
  padding: 10px 12px;
  font-size: 14px;
}

#regionSelect {
  width: 100%;
}

button { cursor: pointer }
button:hover { border-color: rgba(54, 80, 122, .9) }

.mt { margin-top: 12px }

.muted { opacity: .75 }
.danger { color: var(--danger) }
.ok { color: var(--accent) }

.legend {
  display: flex;
  gap: 14px;
  flex-wrap: wrap;
  font-size: 12px;
}

.dot {
  width: 10px;
  height: 10px;
  border-radius: 3px;
  display: inline-block;
  margin-right: 6px;
  vertical-align: middle;
  border: 1px solid rgba(0, 0, 0, .33);
}
.dot.on { background: var(--accent) }
.dot.off { background: var(--off) }
.dot.unknown { background: var(--unknown) }

.timeline { margin-top: 10px }

.t-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 10px 0 6px;
  gap: 10px;
  flex-wrap: wrap;
}

/* ===== Старий режим: вертикальні "пилюльки" ===== */

.vgrid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  border-radius: 12px;
  padding: 10px;
  background: transparent;
}

.col {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.slot {
  display: flex;
  align-items: center;
  width: 100%;
}

.pill {
  height: 36px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 10px;
  font-size: 16px;
  font-weight: 600;
  line-height: 1;
  font-variant-numeric: tabular-nums;
  letter-spacing: .6px;
  border: 1px solid rgba(0, 0, 0, .12);
  user-select: none;
  width: 100%;
  color: var(--pill-text-dark);
}

.pill.on { background: var(--accent); color: var(--pill-text-dark) }
.pill.off { background: var(--off); color: var(--text) }
.pill.unknown { background: var(--unknown); color: var(--text) }

/* ===== Новий режим: горизонтальна лінія ===== */

.timeline-line{
  position:relative;
  padding:18px 8px 10px;
}

.tl-breaks{position:absolute;left:8px;right:8px;top:0;height:18px;pointer-events:none}
.breakpoint{position:absolute;top:0;font-size:12px;color:var(--muted);white-space:nowrap}

.tl-bar{display:flex;height:40px;border-radius:8px;overflow:hidden;border:1px solid var(--border)}
.segment{height:100%;display:flex;align-items:center;justify-content:center;position:relative;width:var(--pct)}
.segment.on{background:linear-gradient(90deg,var(--accent) 0 100%)}
.segment.off{background:linear-gradient(90deg,var(--off) 0 100%)}
.segment.unknown{background:linear-gradient(90deg,var(--unknown) 0 100%)}
.seg-value{font-size:16px;font-weight:600;color:var(--pill-text-dark);padding:0 6px}
.segment.off .seg-value{color:var(--text)}

/* tiny segments: hide value */
.segment[data-short="1"] .seg-value{display:none}

/* Now indicator (vertical line + label) */
.now-line{position:absolute;background:var(--now);z-index:6;border-radius:2px;box-shadow:0 0 8px rgba(0,0,0,0.35)}
.now-indicator{position:absolute;z-index:7;font-size:12px;padding:4px 8px;border-radius:8px;background:var(--card);color:var(--text);border:2px solid var(--now);white-space:nowrap;bottom:-24px}

.raw { margin-top: 12px }

pre {
  white-space: pre-wrap;
  word-break: break-word;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px;
}

.footer {
  margin-top: 10px;
  font-size: 12px;
  color: var(--muted);
}

/* Minimalist mode: hide controls and extras, show only timeline and a small toggle */
/* The toggle is visible by default; when minimal mode is active it becomes a floating restore button. */
.minimal-toggle{
  display: inline-block;
  margin-top: 10px;
  border-radius:10px;
  padding:8px 10px;
  border:1px solid var(--border);
  background:var(--card);
  color:var(--text);
}

/* floating button should be hidden by default (only shown in minimal mode) */
.minimal-floating{ display: none }

/* hide common UI inside the card except the timeline and the minimal toggle */
:root[data-minimal="1"] .card > .row,
:root[data-minimal="1"] .card > .row.row--between,
:root[data-minimal="1"] #rawWrap,
:root[data-minimal="1"] .footer {
  display: none !important;
}

/* hide timeline headers and info lines, keep only the bar */
:root[data-minimal="1"] .timeline .t-head,
:root[data-minimal="1"] .timeline .muted {
  display: none !important;
}

/* in minimal mode: keep inline button occupying space but hide it visually; show floating button at bottom-right */
:root[data-minimal="1"] #minimalToggleBtn { visibility: hidden; }
:root[data-minimal="1"] #minimalFloatingBtn { visibility: visible; display: block; margin: 12px auto 0; }

@media(max-width:720px) {
  .vgrid { grid-template-columns: repeat(2, minmax(72px, 1fr)) }
  .pill { height: 32px; font-size: 16px }
  .timeline-line { height: auto; padding:12px 8px }

  /* vertical line layout: labels column on the left, bar column on the right */
  .tl-breaks{position:absolute;left:8px;top:8px;bottom:8px;width:56px;height:auto;pointer-events:none}
  .breakpoint{position:absolute;left:0;font-size:12px;color:var(--muted);white-space:nowrap;transform:translateY(-50%)}

  .tl-bar{display:flex;flex-direction:column;min-height:400px;width:75px;border-radius:8px;overflow:hidden;border:1px solid var(--border);margin-left:72px}
  .segment{width:100%;height:var(--pct);display:flex;align-items:center;justify-content:center}
  .seg-value{font-size:14px}
  .now-line{left:154px;right:auto;width:14px}
  .now-indicator{left:165px}
}
